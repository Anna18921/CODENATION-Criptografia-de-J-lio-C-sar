//porting issacs fs to readstring

var util = require('util');
var fs = require('fs');
var StringDecoder = require('string_decoder').StringDecoder;
var assert = require('assert');
var controlStream = require('../stream').controlStream
var reader = require('../stream').reader
var es = require('event-stream')

pass = new controlStream()
read = new reader(pass)
fs.createReadStream('sample2.xml').pipe(pass)
pass.on('data',function(){console.log('--')})

pass.pipe(es.through(function write(data){
	console.log(data.toString())
}), {})

pass.pipe(es.through(function write(data){
	console.log('2'+ data.toString())
}), {})

require('repl').start({prompt:'>>'})