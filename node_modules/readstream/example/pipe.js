var controlStream = require('../stream').controlStream
var reader = require('../stream').reader

var test = new controlStream()

 test3 = new controlStream()
test4 = new controlStream()
var testRead = new reader(test)

var testRead2 = new reader(test)

testRead.read(5,function(err,buff){
	console.log('---',buff.toString())
})

test.write(new Buffer('ggdfsafagg'))

test.write(new Buffer('wwerew'))

testRead2.read(6,function(err,buff){
	console.log(buff.toString())
})

testRead.read(4,function(err,buff){
	console.log(buff.toString())
})


test.pipe(test3)

process.nextTick(function(){
	test.pipe(test4)
})

require('repl').start({prompt:'>>'})

